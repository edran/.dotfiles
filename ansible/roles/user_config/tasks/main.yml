---
- name: Symlink dotfiles
  file:
    src: "{{ ansible_env.PWD }}/../{{ item.dot }}"
    dest: "{{ ansible_env.HOME }}/{{ item.dest }}"
    state: link
    force: yes
  with_items: "{{ linking_paths }}"

- name: Add trim to all SSDs
  command: sed -ie 's/^exec fstrim-all*$/& --no-model-check/g' /etc/cron.weekly/fstrim
  sudo: yes

- name: Add gsettings
  gsetting: user="{{ansible_user_id}}"
            key="{{item.key}}"
            value="{{item.value}}"
  with_items: "{{ gsettings_settings }}"

- name: Ensure files are 0644
  command: find /etc/apt/sources.list.d/* -type f -exec chmod 0644 {} \;
